## Main file

`assess-empcalib.R`

Configuration files found in `data/config` sets the simulation settings.
The configuration file to use is specified when running
`assess-empcalib.R` from command line using `Rscript` e.g.,

    Rscript ./assess-empcalib.R ./data/config/unmeasuredconf/simconfig-unmeasuredconf-ideal-5negctrl.csv

The command line setup allows many simulations to be run in parallel on a batch processing
system such as Portable Batch System (PBS).

If the configuration file is not supplied, the script defaults to the
unmeasured confounder simulation scenario.

The `settings_file` variable (located in the beginning of the script) stores
the location of configuration file. Running the `assess-empcalib.R` from an
integrated development environment (IDE) such as RStudio requires storing
the desired configuration file to the `settings_file` variable.

## Collating location of simulation results

The code in `gen-simres-paths-table.R` collects the locations of results of each simulation
scenario into a CSV file. The simulation scenario to collect the results for
can be specified inside the script.

The resulting CSV files are used as part of plotting.

## Plotting

`plot-bias_v_se-manual_yaxis_range.R` script generates the funnel plots (figures of
the manuscript). It allows the y-axis of plots in each simulation scenario to be specified so
figures can be made consistent. It calls other functions to perform the actual plotting. The
script obtains the data from CSV files that contains the location of the actual results; these
CSV files are generated by `gen-simres-paths-table.R`

Individual plots are placed inside cells of a template, `figures-template.svg`.
This template can be open in drawing tools such as diagrams.net (formery draw.io).

## Calcuates mean difference of average bias

`calc_avgdiffabsbias.R` contains code that will read the collated simulation result
file (generated by `gen-simres-paths-table.R`) and calculates the mean differences.

